// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

var Fetch                     = require("bs-fetch/lib/js/src/Fetch.js");
var React                     = require("react");
var ReasonReact               = require("reason-react/lib/js/src/ReasonReact.js");
var SimResponse$ReactTemplate = require("../domain/SimResponse.bs.js");

function str(prim) {
  return prim;
}

function startSim(router) {
  fetch("/api/sim", Fetch.RequestInit[/* make */0](/* Some */[/* Post */2], /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0)(/* () */0)).then((function (prim) {
              return prim.json();
            })).then((function (json) {
            return Promise.resolve(SimResponse$ReactTemplate.parse(json));
          })).then((function (simResponse) {
          var simId = simResponse[/* simId */0];
          return Promise.resolve((router.setRoute("sim/" + (String(simId) + "")), /* () */0));
        }));
  return /* () */0;
}

var component = ReasonReact.statelessComponent("SimStart");

function make(router, _) {
  var newrecord = component.slice();
  newrecord[/* render */9] = (function () {
      return React.createElement("div", {
                  className: "sim-start"
                }, React.createElement("h1", undefined, "Ants!"), React.createElement("p", undefined, "Simulate ant colony foraging behavior, using Elixir processes."), React.createElement("button", {
                      onClick: (function () {
                          return startSim(router);
                        })
                    }, "Start a simulation"));
    });
  return newrecord;
}

exports.str       = str;
exports.startSim  = startSim;
exports.component = component;
exports.make      = make;
/* component Not a pure module */
